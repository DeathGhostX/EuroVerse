<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Vocabulario temporal ampliado ‚Äî Duraciones y marcadores (ES ‚Üí AR)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --text:#0b1220; --muted:#556; --accent:#1f6feb; --accent-contrast:#fff;
      --border:#e6e9ee; --tile-min:220px; --pad:12px; --word-size:1rem; --trans-size:0.88rem; --btn-size:44px;
      --max-width:1100px;
    }
    .dense{--tile-min:150px;--pad:8px;--word-size:0.92rem;--trans-size:0.78rem;--btn-size:40px;}
    html,body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;}
    .wrap{max-width:var(--max-width);margin:0 auto;padding:12px;}
    header{position:sticky;top:0;background:var(--bg);padding:10px 0;border-bottom:1px solid var(--border);z-index:20;}
    h1{font-size:1.05rem;margin:6px 0;text-align:center;}
    .controls{display:grid;grid-template-columns:1fr 1fr auto;gap:8px;align-items:center;margin:10px 0;}
    .control{display:flex;gap:8px;align-items:center;background:var(--card);padding:8px;border-radius:8px;border:1px solid var(--border);}
    label{font-size:0.88rem;color:var(--muted);white-space:nowrap;}
    select,input[type="search"]{border:1px solid var(--border);padding:8px;border-radius:6px;background:transparent;font-size:0.95rem;color:var(--text);outline:none;}
    .density-toggle{display:flex;gap:6px;align-items:center;}
    .density-toggle button{padding:6px 10px;border-radius:8px;border:1px solid var(--border);background:transparent;cursor:pointer;}
    main{margin-top:12px;}
    section{margin:18px 0;padding-top:10px;border-top:1px solid var(--border);}
    .category-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:10px;gap:12px;}
    .category-title{font-weight:800;font-size:1.02rem;}
    .chip{background:#eef6ff;padding:6px 12px;border-radius:999px;color:var(--muted);font-size:0.9rem;border:1px solid var(--border);}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--tile-min),1fr));gap:12px;}
    .item{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:var(--pad);display:flex;justify-content:space-between;align-items:flex-start;gap:12px;box-shadow:0 4px 10px rgba(15,20,30,0.04);min-height:72px;}
    .left{display:flex;flex-direction:column;min-width:0;}
    .term{font-weight:800;font-size:var(--word-size);line-height:1.12;}
    .desc{color:var(--muted);font-size:var(--trans-size);margin-top:6px;line-height:1.06;}
    .arabic{color:#2b6b5a;font-size:0.95rem;margin-top:6px;}
    .speak{background:var(--accent);color:var(--accent-contrast);border:none;padding:8px;border-radius:999px;cursor:pointer;min-width:var(--btn-size);min-height:var(--btn-size);display:inline-flex;align-items:center;justify-content:center;font-size:1.05rem;}
    @media (max-width:900px){.controls{grid-template-columns:1fr 1fr;}}
    @media (max-width:560px){.controls{grid-template-columns:1fr;} .grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));} .item{min-height:56px;padding:8px;} .speak{min-width:36px;min-height:36px;font-size:0.95rem;}}
  </style>
</head>
<body>
  <div id="app" class="wrap dense" role="application" aria-label="Vocabulario temporal ampliado">
    <header>
      <h1>Vocabulario temporal ‚Äî Duraciones y marcadores (ampliado)</h1>

      <div class="controls" role="region" aria-label="Controles">
        <div class="control" style="min-width:240px;">
          <label for="voiceSelect">Voz / Acento</label>
          <select id="voiceSelect" aria-label="Selector de voz y acento" style="margin-left:8px;min-width:180px;">
            <option value="auto">Auto (mejor disponible)</option>
          </select>
        </div>

        <div class="control" style="min-width:320px;">
          <label for="search">Buscar</label>
          <input id="search" type="search" placeholder="Filtrar (espa√±ol o √°rabe)..." aria-label="Buscar" />
        </div>

        <div class="control" style="justify-content:flex-end;">
          <div class="density-toggle" aria-hidden="false">
            <label style="font-size:0.88rem;color:var(--muted);">Densidad</label>
            <button id="normalBtn" title="Densidad normal">Normal</button>
            <button id="denseBtn" title="Vista densa">Densa</button>
          </div>
        </div>
      </div>
    </header>

    <main aria-live="polite">
      <!-- Secci√≥n 1: Unidades y duraciones -->
      <section aria-label="Unidades y duraciones">
        <div class="category-header">
          <div class="category-title">Unidades y duraciones</div>
          <div class="chip">segundo ‚Üí milenio, intervalos y aproximaciones</div>
        </div>
        <div id="durationsGrid" class="grid" role="list"></div>
      </section>

      <!-- Secci√≥n 2: Art√≠culos y marcadores temporales -->
      <section aria-label="Art√≠culos y marcadores temporales">
        <div class="category-header">
          <div class="category-title">Art√≠culos y marcadores temporales</div>
          <div class="chip">d√≠as, estaciones, preposiciones y locuciones</div>
        </div>
        <div id="temporalArticlesGrid" class="grid" role="list"></div>
      </section>

      <!-- Secci√≥n 3: Frecuencia y conectores -->
      <section aria-label="Frecuencia y conectores">
        <div class="category-header">
          <div class="category-title">Adverbios de frecuencia y conectores</div>
          <div class="chip">siempre, nunca, mientras, cuando, hasta que...</div>
        </div>
        <div id="frequencyGrid" class="grid" role="list"></div>
      </section>

      <!-- Secci√≥n 4: Frases idiom√°ticas y plantillas -->
      <section aria-label="Frases idiom√°ticas y plantillas">
        <div class="category-header">
          <div class="category-title">Frases idiom√°ticas y plantillas</div>
          <div class="chip">expresiones √∫tiles para hablar del tiempo</div>
        </div>
        <div id="phrasesGrid" class="grid" role="list"></div>
      </section>

      <!-- Secci√≥n 5: Verbos y construcciones temporales -->
      <section aria-label="Verbos y construcciones temporales">
        <div class="category-header">
          <div class="category-title">Verbos y construcciones temporales</div>
          <div class="chip">infinitivos y ejemplos</div>
        </div>
        <div id="verbsGrid" class="grid" role="list"></div>
      </section>
    </main>

    <footer>
      Pulsa üîä para o√≠r la pronunciaci√≥n; usa el buscador para filtrar por espa√±ol o √°rabe; modo denso para ver m√°s tarjetas en pantalla.
    </footer>
  </div>

  <script>
    /* Datos ampliados: duraciones, art√≠culos, frecuencia, frases y verbos */
    const DURATIONS = [
      {es:"segundo", ar:"ÿ´ÿßŸÜŸäÿ©", desc:"En un segundo vuelvo."},
      {es:"segundos", ar:"ÿ´ŸàÿßŸÜŸç", desc:"Espera 30 segundos."},
      {es:"minuto", ar:"ÿØŸÇŸäŸÇÿ©", desc:"Un minuto, por favor."},
      {es:"minutos", ar:"ÿØŸÇÿßÿ¶ŸÇ", desc:"En 10 minutos salimos."},
      {es:"hora", ar:"ÿ≥ÿßÿπÿ©", desc:"La reuni√≥n dura una hora."},
      {es:"horas", ar:"ÿ≥ÿßÿπÿßÿ™", desc:"Trabaj√≥ 8 horas."},
      {es:"d√≠a", ar:"ŸäŸàŸÖ", desc:"Un d√≠a tiene 24 horas."},
      {es:"d√≠as", ar:"ÿ£ŸäÿßŸÖ", desc:"En tres d√≠as volver√©."},
      {es:"semana", ar:"ÿ£ÿ≥ÿ®Ÿàÿπ", desc:"La semana que viene."},
      {es:"semanas", ar:"ÿ£ÿ≥ÿßÿ®Ÿäÿπ", desc:"En dos semanas."},
      {es:"quincena", ar:"ÿ£ÿ≥ÿ®ŸàÿπÿßŸÜ ÿ™ŸÇÿ±Ÿäÿ®Ÿãÿß", desc:"Cobro cada quincena."},
      {es:"mes", ar:"ÿ¥Ÿáÿ±", desc:"Este mes hay vacaciones."},
      {es:"meses", ar:"ÿ£ÿ¥Ÿáÿ±", desc:"Hace tres meses."},
      {es:"trimestre", ar:"ÿ±ÿ®ÿπ ÿ≥ŸÜÿ©", desc:"Informe trimestral."},
      {es:"cuatrimestre", ar:"ÿ£ÿ±ÿ®ÿπÿ© ÿ£ÿ¥Ÿáÿ± ÿ™ŸÇÿ±Ÿäÿ®Ÿãÿß", desc:"Periodo acad√©mico."},
      {es:"semestre", ar:"ŸÜÿµŸÅ ÿ≥ŸÜÿ©", desc:"Curso semestral."},
      {es:"a√±o", ar:"ÿ≥ŸÜÿ©", desc:"El a√±o pasado viaj√©."},
      {es:"a√±os", ar:"ÿ≥ŸÜŸàÿßÿ™", desc:"Hace diez a√±os."},
      {es:"d√©cada", ar:"ÿπŸÇÿØ", desc:"En la √∫ltima d√©cada..."},
      {es:"siglo", ar:"ŸÇÿ±ŸÜ", desc:"Hace un siglo."},
      {es:"milenio", ar:"ÿ£ŸÑŸÅŸäÿ©", desc:"En un milenio..."},
      {es:"instante", ar:"ŸÑÿ≠ÿ∏ÿ©", desc:"En un instante termin√≥."},
      {es:"momento", ar:"ŸÑÿ≠ÿ∏ÿ©/ŸàŸÇÿ™ ŸÇÿµŸäÿ±", desc:"Espera un momento."},
      {es:"lapso", ar:"ŸÅÿ™ÿ±ÿ©", desc:"Un lapso de tiempo breve."},
      {es:"intervalo", ar:"ŸÅÿßÿµŸÑ/ŸÅÿ™ÿ±ÿ©", desc:"Intervalo de 15 minutos."},
      {es:"per√≠odo", ar:"ŸÅÿ™ÿ±ÿ© ÿ≤ŸÖŸÜŸäÿ©", desc:"Per√≠odo de prueba de un mes."},
      {es:"plazo", ar:"ŸÖŸáŸÑÿ©/ŸÅÿ™ÿ±ÿ©", desc:"Plazo de entrega: 30 d√≠as."},
      {es:"vigencia", ar:"ÿ≥ÿ±ŸäÿßŸÜ/ŸÖÿØÿ© ÿ≥ÿ±ŸäÿßŸÜ", desc:"Periodo de vigencia del contrato."},
      {es:"temporada", ar:"ŸÖŸàÿ≥ŸÖ", desc:"Temporada de verano."},
      {es:"era", ar:"ÿπÿµÿ±", desc:"Era geol√≥gica."},
      {es:"√©poca", ar:"ÿ≠ŸÇÿ®ÿ©/ÿπÿµÿ±", desc:"√âpoca medieval."}
    ];

    const TEMPORAL_ARTICLES = [
      {es:"el lunes", ar:"ŸäŸàŸÖ ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ", desc:"d√≠a concreto: El lunes tengo cita."},
      {es:"los lunes", ar:"ÿ£ŸäÿßŸÖ ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ", desc:"d√≠as repetidos: Los lunes trabajo desde casa."},
      {es:"este mes", ar:"Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±", desc:"mes en curso: Este mes hay ofertas."},
      {es:"ese mes", ar:"ÿ∞ŸÑŸÉ ÿßŸÑÿ¥Ÿáÿ±", desc:"mes mencionado: Ese mes fue dif√≠cil."},
      {es:"el fin de semana", ar:"ÿπÿ∑ŸÑÿ© ŸÜŸáÿßŸäÿ© ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ", desc:"fin de semana concreto: El fin de semana viajo."},
      {es:"el pr√≥ximo viernes", ar:"ÿßŸÑÿ¨ŸÖÿπÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©", desc:"fecha pr√≥xima: El pr√≥ximo viernes es fiesta."},
      {es:"en verano", ar:"ŸÅŸä ÿßŸÑÿµŸäŸÅ", desc:"estaci√≥n: En verano hace calor."},
      {es:"en invierno", ar:"ŸÅŸä ÿßŸÑÿ¥ÿ™ÿßÿ°", desc:"estaci√≥n: En invierno nieva."},
      {es:"a mediod√≠a", ar:"ÿπŸÜÿØ ÿßŸÑÿ∏Ÿáÿ±", desc:"momento del d√≠a: Comemos a mediod√≠a."},
      {es:"a medianoche", ar:"ÿπŸÜÿØ ŸÖŸÜÿ™ÿµŸÅ ÿßŸÑŸÑŸäŸÑ", desc:"momento nocturno: Lleg√≥ a medianoche."},
      {es:"al amanecer", ar:"ÿπŸÜÿØ ÿßŸÑŸÅÿ¨ÿ±", desc:"inicio del d√≠a: Salimos al amanecer."},
      {es:"al anochecer", ar:"ÿπŸÜÿØ ÿßŸÑÿ∫ÿ≥ŸÇ", desc:"inicio de la noche: Regresamos al anochecer."},
      {es:"por la ma√±ana", ar:"ÿµÿ®ÿßÿ≠Ÿãÿß", desc:"parte del d√≠a: Trabajo por la ma√±ana."},
      {es:"por la tarde", ar:"ŸÖÿ≥ÿßÿ°Ÿã", desc:"parte del d√≠a: Estudio por la tarde."},
      {es:"por la noche", ar:"ŸÑŸäŸÑŸãÿß", desc:"parte del d√≠a: Leo por la noche."},
      {es:"a la hora de", ar:"ÿπŸÜÿØ/ŸÅŸä ŸàŸÇÿ™", desc:"marca temporal: A la hora de comer."},
      {es:"durante", ar:"ÿÆŸÑÿßŸÑ", desc:"duraci√≥n: Durante la reuni√≥n no contestes."},
      {es:"desde", ar:"ŸÖŸÜÿ∞", desc:"punto de inicio: Trabajo aqu√≠ desde 2018."},
      {es:"hasta", ar:"ÿ≠ÿ™Ÿâ", desc:"punto final: Estar√© fuera hasta el viernes."},
      {es:"antes de", ar:"ŸÇÿ®ŸÑ", desc:"anterioridad: L√°vate las manos antes de comer."},
      {es:"despu√©s de", ar:"ÿ®ÿπÿØ", desc:"posterioridad: Salimos despu√©s de cenar."},
      {es:"a partir de", ar:"ÿßÿπÿ™ÿ®ÿßÿ±Ÿãÿß ŸÖŸÜ", desc:"inicio oficial: A partir de ma√±ana."},
      {es:"en cuanto", ar:"ÿ®ŸÖÿ¨ÿ±ÿØ ÿ£ŸÜ", desc:"inmediaci√≥n: En cuanto llegue, te aviso."},
      {es:"al + infinitivo", ar:"ÿπŸÜÿØ + ÿßŸÑŸÖÿµÿØÿ±", desc:"acci√≥n simult√°nea: Al entrar, saluda."},
      {es:"por entonces", ar:"ŸÅŸä ÿ∞ŸÑŸÉ ÿßŸÑÿ≠ŸäŸÜ", desc:"referencia pasada: Por entonces viv√≠a en Madrid."},
      {es:"a la larga", ar:"ÿπŸÑŸâ ÿßŸÑŸÖÿØŸâ ÿßŸÑÿ∑ŸàŸäŸÑ", desc:"consecuencia futura: A la larga compensa."}
    ];

    const FREQUENCY_AND_CONNECTORS = [
      {es:"siempre", ar:"ÿØÿßÿ¶ŸÖŸãÿß", desc:"Siempre desayuno a las 8."},
      {es:"nunca", ar:"ÿ£ÿ®ÿØŸãÿß", desc:"Nunca llego tarde."},
      {es:"a menudo", ar:"ÿ∫ÿßŸÑÿ®Ÿãÿß", desc:"Voy al cine a menudo."},
      {es:"a veces", ar:"ÿ£ÿ≠ŸäÿßŸÜŸãÿß", desc:"A veces trabajo desde casa."},
      {es:"rara vez", ar:"ŸÜÿßÿØÿ±ÿßŸã", desc:"Rara vez como fuera."},
      {es:"cada", ar:"ŸÉŸÑ", desc:"Cada semana hay reuni√≥n."},
      {es:"cada dos d√≠as", ar:"ŸÉŸÑ ŸäŸàŸÖŸäŸÜ", desc:"Frecuencia: cada dos d√≠as."},
      {es:"cada mes", ar:"ŸÉŸÑ ÿ¥Ÿáÿ±", desc:"Frecuencia mensual."},
      {es:"mientras", ar:"ÿ®ŸäŸÜŸÖÿß/ÿ£ÿ´ŸÜÿßÿ°", desc:"Mientras cocino, escucho m√∫sica."},
      {es:"cuando", ar:"ÿπŸÜÿØŸÖÿß", desc:"Cuando llueve, me quedo en casa."},
      {es:"hasta que", ar:"ÿ≠ÿ™Ÿâ", desc:"Espera hasta que termine."},
      {es:"tan pronto como", ar:"ÿ®ŸÖÿ¨ÿ±ÿØ ÿ£ŸÜ", desc:"Te llamo tan pronto como llegue."},
      {es:"en cuanto", ar:"ÿ®ŸÖÿ¨ÿ±ÿØ ÿ£ŸÜ", desc:"En cuanto pueda, te aviso."},
      {es:"a la vez", ar:"ŸÅŸä ŸÜŸÅÿ≥ ÿßŸÑŸàŸÇÿ™", desc:"No puedo hacer dos cosas a la vez."},
      {es:"por ahora", ar:"ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ÿßŸÑŸä", desc:"Por ahora, no hay cambios."},
      {es:"de inmediato", ar:"ŸÅŸàÿ±Ÿãÿß", desc:"Act√∫a de inmediato."},
      {es:"con anterioridad", ar:"ŸÇÿ®ŸÑ ÿ∞ŸÑŸÉ", desc:"Con anterioridad se inform√≥."}
    ];

    const PHRASES = [
      {es:"en un abrir y cerrar de ojos", ar:"ŸÅŸä ÿ∫ŸÖÿ∂ÿ© ÿπŸäŸÜ", desc:"muy r√°pido"},
      {es:"de vez en cuando", ar:"ŸÖŸÜ ÿ≠ŸäŸÜ ŸÑÿ¢ÿÆÿ±", desc:"ocasionalmente"},
      {es:"a largo plazo", ar:"ÿπŸÑŸâ ÿßŸÑŸÖÿØŸâ ÿßŸÑÿ∑ŸàŸäŸÑ", desc:"duraci√≥n extensa"},
      {es:"a corto plazo", ar:"ÿπŸÑŸâ ÿßŸÑŸÖÿØŸâ ÿßŸÑŸÇÿµŸäÿ±", desc:"duraci√≥n breve"},
      {es:"en el transcurso de", ar:"ÿÆŸÑÿßŸÑ ŸÖÿ≥ÿßÿ±/ÿÆŸÑÿßŸÑ", desc:"durante un periodo"},
      {es:"a lo largo de", ar:"ÿπŸÑŸâ ŸÖÿØÿßÿ±", desc:"durante todo el periodo"},
      {es:"en un plazo de", ar:"ÿÆŸÑÿßŸÑ ŸÅÿ™ÿ±ÿ© ÿ≤ŸÖŸÜŸäÿ©", desc:"dentro de (plazo)"},
      {es:"con el tiempo", ar:"ŸÖÿπ ŸÖÿ±Ÿàÿ± ÿßŸÑŸàŸÇÿ™", desc:"progresivamente"},
      {es:"a partir de ahora", ar:"ÿßÿπÿ™ÿ®ÿßÿ±Ÿãÿß ŸÖŸÜ ÿßŸÑÿ¢ŸÜ", desc:"desde este momento"},
      {es:"hasta nuevo aviso", ar:"ÿ≠ÿ™Ÿâ ÿ•ÿ¥ÿπÿßÿ± ÿ¢ÿÆÿ±", desc:"indefinido hasta aviso"},
      {es:"por el momento", ar:"ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ±ÿßŸáŸÜ", desc:"temporalmente"},
      {es:"en breve", ar:"ŸÇÿ±Ÿäÿ®Ÿãÿß", desc:"dentro de poco tiempo"},
      {es:"en el acto", ar:"ŸÅŸä ÿßŸÑÿ≠ÿßŸÑ", desc:"inmediatamente"},
      {es:"a la espera de", ar:"ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ±", desc:"pendiente de algo"}
    ];

    const VERBS = [
      {es:"esperar", ar:"ŸäŸÜÿ™ÿ∏ÿ±", desc:"Esperamos 10 minutos."},
      {es:"demorar", ar:"Ÿäÿ§ÿÆÿ±", desc:"La entrega se demor√≥."},
      {es:"aplazar", ar:"Ÿäÿ§ÿ¨ŸÑ", desc:"Aplazaron la reuni√≥n."},
      {es:"posponer", ar:"Ÿäÿ§ÿ¨ŸÑ", desc:"Pospusimos la cita."},
      {es:"anticipar", ar:"Ÿäÿ™ŸàŸÇÿπ/Ÿäÿ≥ÿ®ŸÇ", desc:"Anticiparon la fecha."},
      {es:"programar", ar:"Ÿäÿ®ÿ±ŸÖÿ¨/Ÿäÿ≠ÿØÿØ ŸÖŸàÿπÿØŸãÿß", desc:"Programamos la sesi√≥n."},
      {es:"reprogramar", ar:"ŸäÿπŸäÿØ ÿßŸÑÿ¨ÿØŸàŸÑÿ©", desc:"Reprogramaron la cita."},
      {es:"vencer", ar:"ŸäŸÜÿ™ŸáŸä/Ÿäÿ≥ÿ™ÿ≠ŸÇ", desc:"El plazo vence el viernes."},
      {es:"caducar", ar:"ÿ™ŸÜÿ™ŸáŸä ÿµŸÑÿßÿ≠Ÿäÿ™Ÿá", desc:"El permiso caduca en junio."},
      {es:"permanecer", ar:"Ÿäÿ®ŸÇŸâ", desc:"Permaneci√≥ en la ciudad una semana."},
      {es:"transcurrir", ar:"ŸäŸÖÿ∂Ÿä/ŸäŸÖÿ±", desc:"Transcurrieron dos horas."},
      {es:"prolongar", ar:"ŸäŸÖÿØÿØ", desc:"Prolongaron la estancia."},
      {es:"acortar", ar:"ŸäŸÇÿµÿ±", desc:"Acortaron el plazo."},
      {es:"iniciar", ar:"Ÿäÿ®ÿØÿ£", desc:"Iniciamos el proyecto en enero."},
      {es:"finalizar", ar:"ŸäŸÜŸáŸä", desc:"Finalizaremos en marzo."}
    ];

    /* Funci√≥n para crear tarjeta */
    function createCard(item) {
      const el = document.createElement('div');
      el.className = 'item';
      el.setAttribute('role','listitem');

      const left = document.createElement('div'); left.className = 'left';
      const term = document.createElement('div'); term.className = 'term'; term.textContent = item.es;
      left.appendChild(term);

      if (item.desc) {
        const d = document.createElement('div'); d.className = 'desc'; d.textContent = item.desc;
        left.appendChild(d);
      }
      if (item.ar) {
        const a = document.createElement('div'); a.className = 'arabic'; a.textContent = item.ar;
        left.appendChild(a);
      }

      const btn = document.createElement('button');
      btn.className = 'speak';
      btn.type = 'button';
      btn.setAttribute('aria-label', `Pronunciar ${item.es}`);
      btn.innerHTML = 'üîä';
      btn.addEventListener('click', () => speakText(item.es));

      el.appendChild(left);
      el.appendChild(btn);
      return el;
    }

    /* Poblar grids */
    const durationsGrid = document.getElementById('durationsGrid');
    DURATIONS.forEach(d => durationsGrid.appendChild(createCard(d)));

    const temporalGrid = document.getElementById('temporalArticlesGrid');
    TEMPORAL_ARTICLES.forEach(t => temporalGrid.appendChild(createCard(t)));

    const freqGrid = document.getElementById('frequencyGrid');
    FREQUENCY_AND_CONNECTORS.forEach(f => freqGrid.appendChild(createCard(f)));

    const phrasesGrid = document.getElementById('phrasesGrid');
    PHRASES.forEach(p => phrasesGrid.appendChild(createCard(p)));

    const verbsGrid = document.getElementById('verbsGrid');
    VERBS.forEach(v => verbsGrid.appendChild(createCard(v)));

    /* S√≠ntesis de voz: selector de voces y pronunciaci√≥n */
    const voiceSelect = document.getElementById('voiceSelect');
    function populateVoices(){
      const voices = window.speechSynthesis.getVoices() || [];
      const current = voiceSelect.value;
      voiceSelect.innerHTML = '<option value="auto">Auto (mejor disponible)</option>';
      voices.forEach(v => {
        const opt = document.createElement('option');
        opt.value = v.name + '||' + v.lang;
        opt.textContent = `${v.name} ‚Äî ${v.lang}`;
        voiceSelect.appendChild(opt);
      });
      if (current) {
        const found = Array.from(voiceSelect.options).find(o => o.value === current);
        if (found) voiceSelect.value = current;
      }
    }
    populateVoices();
    window.speechSynthesis.onvoiceschanged = populateVoices;

    function speakText(text){
      if (!('speechSynthesis' in window)) return;
      const u = new SpeechSynthesisUtterance(text);
      const sel = voiceSelect.value;
      if (sel && sel !== 'auto') {
        const [name,lang] = sel.split('||');
        const v = window.speechSynthesis.getVoices().find(x=>x.name===name && x.lang===lang) || window.speechSynthesis.getVoices().find(x=>x.name===name);
        if (v) u.voice = v;
        else if (lang) u.lang = lang;
      } else {
        const v = window.speechSynthesis.getVoices().find(x=>x.lang==='es-ES') || window.speechSynthesis.getVoices().find(x=>x.lang && x.lang.startsWith('es'));
        if (v) u.voice = v;
      }
      u.rate = 0.95;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }

    /* B√∫squeda */
    const search = document.getElementById('search');
    search.addEventListener('input', () => {
      const q = search.value.trim().toLowerCase();
      document.querySelectorAll('[role="listitem"]').forEach(item => {
        const text = item.innerText.toLowerCase();
        item.style.display = q ? (text.includes(q) ? '' : 'none') : '';
      });
    });

    /* Densidad */
    const app = document.getElementById('app');
    document.getElementById('normalBtn').addEventListener('click', ()=> app.classList.remove('dense'));
    document.getElementById('denseBtn').addEventListener('click', ()=> app.classList.add('dense'));

    /* Accesibilidad: Enter activa bot√≥n de pronunciaci√≥n si est√° enfocado */
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const focused = document.activeElement;
        if (focused && focused.classList && focused.classList.contains('speak')) focused.click();
      }
    });
  </script>
</body>
</html>
