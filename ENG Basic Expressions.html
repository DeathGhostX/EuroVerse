<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>English Expressions â€” Compact Grid â€” Expanded Authentic Phrases</title>
<style>
  :root{
    --gap:6px;
    --card-padding:6px;
    --card-bg:#fff;
    --card-border:#e6e6e6;
    --accent:#0b6efd;
    --text:#111;
    --muted:#666;
    --term-font-size:0.86rem;
    --trans-font-size:0.78rem;
    --icon-size:22px;
    --card-min-height:44px;
  }

  html,body{height:100%}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    margin:0;
    background:#f6f7fb;
    color:var(--text);
    padding:14px;
    box-sizing:border-box;
  }

  header{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    margin-bottom:12px;
    flex-wrap:wrap;
  }
  h1{font-size:1.05rem;margin:0}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .controls label{font-size:0.85rem;color:var(--muted)}
  select,input[type="search"],button{padding:6px;border-radius:6px;border:1px solid var(--card-border);background:#fff;font-size:0.88rem}

  /* Grid container: default 12 columns */
  #grid{
    display:grid;
    gap:var(--gap);
    grid-template-columns:repeat(12,1fr);
    align-items:start;
  }

  /* Compact card */
  .card{
    background:var(--card-bg);
    border:1px solid var(--card-border);
    border-radius:8px;
    padding:var(--card-padding);
    box-shadow:0 1px 1px rgba(0,0,0,0.03);
    display:flex;
    gap:8px;
    align-items:center;
    min-height:var(--card-min-height);
    overflow:hidden;
  }
  .card .left{flex:1;min-width:0}
  .term{
    font-weight:700;
    font-size:var(--term-font-size);
    color:var(--text);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .trans{
    font-size:var(--trans-font-size);
    color:var(--muted);
    direction:rtl;
    text-align:right;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .actions{display:flex;gap:6px;align-items:center}
  .btn{background:transparent;border:0;cursor:pointer;padding:4px;border-radius:6px;color:var(--accent)}
  .icon{
    width:var(--icon-size);
    height:var(--icon-size);
    display:inline-grid;
    place-items:center;
    background:rgba(11,110,253,0.06);
    border-radius:6px;
    color:var(--accent);
    font-size:0.95rem;
  }

  /* Group header spans full width */
  .group{grid-column:1/-1;display:flex;align-items:center;gap:8px;margin:6px 0}
  .group h2{font-size:0.88rem;margin:0;padding:6px 8px;border-radius:8px;background:#fff;border:1px solid var(--card-border)}

  /* Responsive adjustments */
  @media (max-width:1400px){ #grid{grid-template-columns:repeat(10,1fr)} }
  @media (max-width:1100px){ #grid{grid-template-columns:repeat(8,1fr)} }
  @media (max-width:800px){ #grid{grid-template-columns:repeat(6,1fr)} }
  @media (max-width:520px){
    #grid{display:block;overflow-x:auto;white-space:nowrap;padding-bottom:6px}
    .card{display:inline-flex;vertical-align:top;width:220px;margin-right:6px}
    .group{display:block}
  }

  footer{margin-top:12px;color:var(--muted);font-size:0.85rem}
  .search{padding:6px;border:1px solid var(--card-border);border-radius:8px;background:#fff}
  .note{font-size:0.82rem;color:var(--muted);margin-top:6px}
</style>
</head>
<body>
<header>
  <div>
    <h1>English Expressions â€” Compact Grid â€” Expanded Authentic Phrases</h1>
    <div style="font-size:0.85rem;color:#666;margin-top:6px">Curated, unique expressions only. Use Columns and Density to adjust layout.</div>
  </div>

  <div class="controls" role="region" aria-label="Controls">
    <label for="columns">Columns</label>
    <select id="columns" title="Columns (6â€“12)">
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12" selected>12</option>
    </select>

    <label for="density">Density (per group)</label>
    <select id="density" title="Expressions per group">
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
    </select>

    <label for="lang">Language</label>
    <select id="lang">
      <option value="en" selected>English</option>
      <option value="ar">Arabic</option>
    </select>

    <label for="voiceSelect">Voice</label>
    <select id="voiceSelect" aria-label="Voice selection"><option>Detecting voices...</option></select>

    <button id="playAll" class="btn" title="Play all cards">Play all</button>

    <input id="search" class="search" type="search" placeholder="Search expression..." aria-label="Search expressions" />
  </div>
</header>

<main>
  <div id="grid" aria-live="polite"></div>
  <div class="note" id="densityNote"></div>
</main>

<footer>
  <strong>Note</strong> Speech uses the browser SpeechSynthesis API. Available voices depend on browser and OS.
</footer>

<script>
/*
  Expanded curated groups.
  - Each group contains only authentic, meaningful expressions.
  - No invented filler, no numeric suffixes, no duplicates.
  - If density requested exceeds available unique phrases in a group, the UI caps to available count and informs the user.
*/

/* Expanded curated lists (unique, meaningful phrases).
   You can extend these lists manually; avoid invented or nonsensical entries.
*/
const baseGroups = {
  "Greetings": [
    ["Hello","Ù…Ø±Ø­Ø¨Ø§"],
    ["Hi","Ø£Ù‡Ù„Ø§"],
    ["Hey","Ù‡Ø§ÙŠ"],
    ["Good morning","ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±"],
    ["Good afternoon","Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±"],
    ["Good evening","Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±"],
    ["Good night","ØªØµØ¨Ø­ Ø¹Ù„Ù‰ Ø®ÙŠØ±"],
    ["How are you?","ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ"],
    ["How's it going?","ÙƒÙŠÙ ØªØ³ÙŠØ± Ø§Ù„Ø£Ù…ÙˆØ±ØŸ"],
    ["Nice to meet you","ØªØ´Ø±ÙØª Ø¨Ù…Ù‚Ø§Ø¨Ù„ØªÙƒ"],
    ["Pleased to meet you","Ø³Ø¹ÙŠØ¯ Ø¨Ù„Ù‚Ø§Ø¦Ùƒ"],
    ["Welcome","Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹"],
    ["Long time no see","Ù„Ù… Ø£Ø±Ùƒ Ù…Ù†Ø° ÙˆÙ‚Øª Ø·ÙˆÙŠÙ„"],
    ["What's up?","Ù…Ø§ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±ØŸ"],
    ["How have you been?","ÙƒÙŠÙ ÙƒÙ†ØªØŸ"],
    ["It's good to see you","Ø³Ø¹ÙŠØ¯ Ø¨Ø±Ø¤ÙŠØªÙƒ"],
    ["Morning!","ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±!"],
    ["Evening!","Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±!"],
    ["How do you do?","ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ (Ø±Ø³Ù…ÙŠ)"],
    ["Glad to see you","Ø³Ø¹ÙŠØ¯ Ø¨Ø±Ø¤ÙŠØªÙƒ"]
  ],

  "Daily phrases": [
    ["Please","Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["Thank you","Ø´ÙƒØ±Ø§"],
    ["Thanks a lot","Ø´ÙƒØ±Ø§ Ø¬Ø²ÙŠÙ„Ø§"],
    ["You're welcome","Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø­Ø¨ ÙˆØ§Ù„Ø³Ø¹Ø©"],
    ["Excuse me","Ø¹ÙÙˆØ§Ù‹"],
    ["I'm sorry","Ø£Ù†Ø§ Ø¢Ø³Ù"],
    ["No problem","Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©"],
    ["That's okay","Ù„Ø§ Ø¨Ø£Ø³"],
    ["Bless you","ÙŠØ±Ø­Ù…Ùƒ Ø§Ù„Ù„Ù‡"],
    ["Congratulations","Ù…Ø¨Ø±ÙˆÙƒ"],
    ["Good luck","Ø­Ø¸Ø§Ù‹ Ø³Ø¹ÙŠØ¯Ø§Ù‹"],
    ["Enjoy","Ø§Ø³ØªÙ…ØªØ¹"],
    ["Have a nice day","Ø£ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙŠÙˆÙ…Ø§Ù‹ Ø³Ø¹ÙŠØ¯Ø§Ù‹"],
    ["All the best","ÙƒÙ„ Ø§Ù„ØªÙˆÙÙŠÙ‚"],
    ["Take care","Ø§Ø¹ØªÙ† Ø¨Ù†ÙØ³Ùƒ"],
    ["My pleasure","Ù…Ù† Ø¯ÙˆØ§Ø¹ÙŠ Ø³Ø±ÙˆØ±ÙŠ"],
    ["No worries","Ù„Ø§ ØªÙ‚Ù„Ù‚"],
    ["That's great","Ù‡Ø°Ø§ Ø±Ø§Ø¦Ø¹"],
    ["Well done","Ø£Ø­Ø³Ù†Øª"],
    ["Keep it up","Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ÙˆØ§Ù„"]
  ],

  "Questions": [
    ["What is your name?","Ù…Ø§ Ø§Ø³Ù…ÙƒØŸ"],
    ["Where are you from?","Ù…Ù† Ø£ÙŠÙ† Ø£Ù†ØªØŸ"],
    ["How old are you?","ÙƒÙ… Ø¹Ù…Ø±ÙƒØŸ"],
    ["Do you speak English?","Ù‡Ù„ ØªØªÙƒÙ„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŸ"],
    ["Can you help me?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø³Ø§Ø¹Ø¯ØªÙŠØŸ"],
    ["What do you do?","Ù…Ø§Ø°Ø§ ØªØ¹Ù…Ù„ØŸ"],
    ["Where do you live?","Ø£ÙŠÙ† ØªØ³ÙƒÙ†ØŸ"],
    ["Are you okay?","Ù‡Ù„ Ø£Ù†Øª Ø¨Ø®ÙŠØ±ØŸ"],
    ["What's this?","Ù…Ø§ Ù‡Ø°Ø§ØŸ"],
    ["When is it?","Ù…ØªÙ‰ØŸ"],
    ["Why did that happen?","Ù„Ù…Ø§Ø°Ø§ Ø­Ø¯Ø« Ø°Ù„ÙƒØŸ"],
    ["How does this work?","ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ù‡Ø°Ø§ØŸ"],
    ["Which one should I choose?","Ø£ÙŠ ÙˆØ§Ø­Ø¯ ÙŠØ¬Ø¨ Ø£Ù† Ø£Ø®ØªØ§Ø±ØŸ"],
    ["Who is responsible?","Ù…Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ØŸ"],
    ["Could you explain that?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø´Ø±Ø­ Ø°Ù„ÙƒØŸ"],
    ["Do you understand?","Ù‡Ù„ ØªÙÙ‡Ù…ØŸ"],
    ["Can I ask you something?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ù† Ø£Ø³Ø£Ù„Ùƒ Ø´ÙŠØ¦Ø§Ù‹ØŸ"],
    ["Is that correct?","Ù‡Ù„ Ù‡Ø°Ø§ ØµØ­ÙŠØ­ØŸ"],
    ["Where can I find it?","Ø£ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„ÙŠÙ‡ØŸ"],
    ["How much does it cost?","ÙƒÙ… ÙŠÙƒÙ„ÙØŸ"]
  ],

  "Travel": [
    ["I need a taxi","Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø³ÙŠØ§Ø±Ø© Ø£Ø¬Ø±Ø©"],
    ["Where is the train station?","Ø£ÙŠÙ† Ù…Ø­Ø·Ø© Ø§Ù„Ù‚Ø·Ø§Ø±ØŸ"],
    ["Where is the bus stop?","Ø£ÙŠÙ† Ù…ÙˆÙ‚Ù Ø§Ù„Ø­Ø§ÙÙ„Ø§ØªØŸ"],
    ["How much is a ticket?","ÙƒÙ… Ø«Ù…Ù† Ø§Ù„ØªØ°ÙƒØ±Ø©ØŸ"],
    ["One ticket please","ØªØ°ÙƒØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["I have a reservation","Ù„Ø¯ÙŠ Ø­Ø¬Ø²"],
    ["Check-in, please","ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["Check-out time?","Ù…Ø§ ÙˆÙ‚Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©ØŸ"],
    ["Is breakfast included?","Ù‡Ù„ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø´Ù…ÙˆÙ„ØŸ"],
    ["Where is the airport?","Ø£ÙŠÙ† Ø§Ù„Ù…Ø·Ø§Ø±ØŸ"],
    ["Which platform is it?","Ø£ÙŠ Ø±ØµÙŠÙØŸ"],
    ["Is this seat taken?","Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø¹Ø¯ Ù…Ø­Ø¬ÙˆØ²ØŸ"],
    ["Do you have a map?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø®Ø±ÙŠØ·Ø©ØŸ"],
    ["How long is the trip?","ÙƒÙ… ØªØ³ØªØºØ±Ù‚ Ø§Ù„Ø±Ø­Ù„Ø©ØŸ"],
    ["Can I get a refund?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø§Ù„ØŸ"],
    ["Where can I buy a ticket?","Ø£ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø§Ø¡ ØªØ°ÙƒØ±Ø©ØŸ"],
    ["Is there a direct train?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ù‚Ø·Ø§Ø± Ù…Ø¨Ø§Ø´Ø±ØŸ"],
    ["How do I get to the city center?","ÙƒÙŠÙ Ø£ØµÙ„ Ø¥Ù„Ù‰ ÙˆØ³Ø· Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŸ"],
    ["Is there luggage storage?","Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ù…ÙƒØ§Ù† Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø£Ù…ØªØ¹Ø©ØŸ"],
    ["Do I need a visa?","Ù‡Ù„ Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ£Ø´ÙŠØ±Ø©ØŸ"]
  ],

  "Shopping": [
    ["How much is this?","ÙƒÙ… Ø«Ù…Ù† Ù‡Ø°Ø§ØŸ"],
    ["Do you accept credit cards?","Ù‡Ù„ ØªÙ‚Ø¨Ù„ÙˆÙ† Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ØŸ"],
    ["Can I try it on?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªØ¬Ø±Ø¨ØªÙ‡ØŸ"],
    ["I would like this","Ø£Ø±ÙŠØ¯ Ù‡Ø°Ø§"],
    ["Do you have a discount?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ø®ØµÙ…ØŸ"],
    ["Where can I buy this?","Ø£ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ØŸ"],
    ["Is this on sale?","Ù‡Ù„ Ù‡Ø°Ø§ Ù…Ø¹Ø±ÙˆØ¶ Ù„Ù„Ø¨ÙŠØ¹ Ø¨Ø®ØµÙ…ØŸ"],
    ["Can I return this?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø±Ø¬Ø§Ø¹ Ù‡Ø°Ø§ØŸ"],
    ["What's your best price?","Ù…Ø§ Ø£ÙØ¶Ù„ Ø³Ø¹Ø± Ù„Ø¯ÙŠÙƒÙ…ØŸ"],
    ["Do you have this in another size?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ù‡Ø°Ø§ Ø¨Ù…Ù‚Ø§Ø³ Ø¢Ø®Ø±ØŸ"],
    ["Can I pay in installments?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¯ÙØ¹ Ø¨Ø§Ù„ØªÙ‚Ø³ÙŠØ·ØŸ"],
    ["Do you offer gift wrapping?","Ù‡Ù„ ØªÙ‚Ø¯Ù…ÙˆÙ† ØªØºÙ„ÙŠÙ Ù‡Ø¯Ø§ÙŠØ§ØŸ"],
    ["Is tax included?","Ù‡Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ù…Ø´Ù…ÙˆÙ„Ø©ØŸ"],
    ["Do you have a loyalty program?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙˆÙ„Ø§Ø¡ØŸ"],
    ["Can I reserve this?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø­Ø¬Ø² Ù‡Ø°Ø§ØŸ"],
    ["Do you ship internationally?","Ù‡Ù„ ØªØ´Ø­Ù†ÙˆÙ† Ø¯ÙˆÙ„ÙŠØ§Ù‹ØŸ"],
    ["Is this authentic?","Ù‡Ù„ Ù‡Ø°Ø§ Ø£ØµÙ„ÙŠØŸ"],
    ["Can I see the receipt?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø±Ø¤ÙŠØ© Ø§Ù„Ø¥ÙŠØµØ§Ù„ØŸ"],
    ["Do you have a warranty?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ø¶Ù…Ø§Ù†ØŸ"],
    ["Can I get a refund?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø§Ù„ØŸ"]
  ],

  "Restaurant": [
    ["A table for two, please","Ø·Ø§ÙˆÙ„Ø© Ù„Ø´Ø®ØµÙŠÙ† Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["The menu, please","Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["I am allergic to...","Ø£Ù†Ø§ Ø£Ø¹Ø§Ù†ÙŠ Ù…Ù† Ø­Ø³Ø§Ø³ÙŠØ© ØªØ¬Ø§Ù‡..."],
    ["Can I have the bill?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙØ§ØªÙˆØ±Ø©ØŸ"],
    ["Water, please","Ù…Ø§Ø¡ Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["I'm vegetarian","Ø£Ù†Ø§ Ù†Ø¨Ø§ØªÙŠ"],
    ["Is there a vegetarian option?","Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø®ÙŠØ§Ø± Ù†Ø¨Ø§ØªÙŠØŸ"],
    ["No sugar please","Ø¨Ø¯ÙˆÙ† Ø³ÙƒØ± Ù…Ù† ÙØ¶Ù„Ùƒ"],
    ["Extra spicy","Ø­Ø§Ø± Ø¬Ø¯Ø§Ù‹"],
    ["Not spicy","ØºÙŠØ± Ø­Ø§Ø±"],
    ["Could I have the salt?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø­ØŸ"],
    ["Could I have a napkin?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù†Ø¯ÙŠÙ„ØŸ"],
    ["Could I have a spoon?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù„Ø¹Ù‚Ø©ØŸ"],
    ["Do you have a kids menu?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„ØŸ"],
    ["Can I have it to go?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø£Ø®Ø°Ù‡ Ù„Ù„Ù…Ù†Ø²Ù„ØŸ"],
    ["Is service included?","Ù‡Ù„ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø´Ù…ÙˆÙ„Ø©ØŸ"],
    ["Do you have any specials today?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ© Ø§Ù„ÙŠÙˆÙ…ØŸ"],
    ["Can I see the wine list?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø±Ø¤ÙŠØ© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø¨ÙŠØ°ØŸ"],
    ["Could you recommend a dish?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ±Ø´ÙŠØ­ Ø·Ø¨Ù‚ØŸ"],
    ["Is this dish gluten-free?","Ù‡Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø·Ø¨Ù‚ Ø®Ø§Ù„Ù Ù…Ù† Ø§Ù„ØºÙ„ÙˆØªÙŠÙ†ØŸ"]
  ],

  "Emergency": [
    ["Help!","Ø§Ù„Ù†Ø¬Ø¯Ø©!"],
    ["Call the police","Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø´Ø±Ø·Ø©"],
    ["I need a doctor","Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø·Ø¨ÙŠØ¨"],
    ["I'm lost","Ø£Ù†Ø§ Ø¶Ø§Ø¦Ø¹"],
    ["Fire!","Ø­Ø±ÙŠÙ‚!"],
    ["I feel sick","Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ù…Ø±Ø¶"],
    ["My wallet was stolen","Ø³Ø±Ù‚ Ù…Ø­ÙØ¸ØªÙŠ"],
    ["I lost my passport","ÙÙ‚Ø¯Øª Ø¬ÙˆØ§Ø² Ø³ÙØ±ÙŠ"],
    ["Is there a safe place?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ù…ÙƒØ§Ù† Ø¢Ù…Ù†ØŸ"],
    ["I need emergency shelter","Ø£Ø­ØªØ§Ø¬ Ù…Ø£ÙˆÙ‰ Ø·Ø§Ø±Ø¦"],
    ["I need medical evacuation","Ø£Ø­ØªØ§Ø¬ Ø¥Ø®Ù„Ø§Ø¡ Ø·Ø¨ÙŠ"],
    ["Where is the nearest hospital?","Ø£ÙŠÙ† Ø£Ù‚Ø±Ø¨ Ù…Ø³ØªØ´ÙÙ‰ØŸ"],
    ["I need help with my visa","Ø£Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø®ØµÙˆØµ Ø§Ù„ØªØ£Ø´ÙŠØ±Ø©"],
    ["I need to contact my embassy","Ø£Ø­ØªØ§Ø¬ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø³ÙØ§Ø±ØªÙŠ"],
    ["Call an ambulance","Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ø³Ø¹Ø§Ù"],
    ["Is there a pharmacy open now?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ØµÙŠØ¯Ù„ÙŠØ© Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù†ØŸ"],
    ["I have been injured","Ù„Ù‚Ø¯ ØªØ¹Ø±Ø¶Øª Ù„Ø¥ØµØ§Ø¨Ø©"],
    ["Someone is hurt","Ù‡Ù†Ø§Ùƒ Ø´Ø®Øµ Ù…ØµØ§Ø¨"],
    ["I need police assistance","Ø£Ø­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø´Ø±Ø·Ø©"],
    ["My phone was stolen","ØªÙ… Ø³Ø±Ù‚Ø© Ù‡Ø§ØªÙÙŠ"]
  ],

  "Directions": [
    ["Left","ÙŠØ³Ø§Ø±"],
    ["Right","ÙŠÙ…ÙŠÙ†"],
    ["Straight ahead","Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù…Ø§Ù… Ù…Ø¨Ø§Ø´Ø±Ø©"],
    ["Turn left","Ø§Ù†Ø¹Ø·Ù ÙŠØ³Ø§Ø±Ø§Ù‹"],
    ["Turn right","Ø§Ù†Ø¹Ø·Ù ÙŠÙ…ÙŠÙ†Ø§Ù‹"],
    ["Go straight","Ø§Ù…Ø¶Ù Ù…Ø¨Ø§Ø´Ø±Ø©"],
    ["Stop here","ØªÙˆÙ‚Ù Ù‡Ù†Ø§"],
    ["Is it within walking distance?","Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡ Ø³ÙŠØ±Ø§Ù‹ØŸ"],
    ["How far is it?","ÙƒÙ… ÙŠØ¨Ø¹Ø¯ØŸ"],
    ["Can you show me on the map?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ±ÙŠÙ†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©ØŸ"],
    ["Which way?","Ø£ÙŠ Ø·Ø±ÙŠÙ‚ØŸ"],
    ["Near","Ù‚Ø±ÙŠØ¨"],
    ["Far","Ø¨Ø¹ÙŠØ¯"],
    ["Take the next street","Ø®Ø° Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ§Ù„ÙŠ"],
    ["Cross the road","Ø§Ø¹Ø¨Ø± Ø§Ù„Ø·Ø±ÙŠÙ‚"],
    ["Follow the signs","Ø§ØªØ¨Ø¹ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª"],
    ["At the roundabout, take the second exit","Ø¹Ù†Ø¯ Ø§Ù„Ø¯ÙˆØ§Ø± Ø®Ø° Ø§Ù„Ù…Ø®Ø±Ø¬ Ø§Ù„Ø«Ø§Ù†ÙŠ"],
    ["It's on your left","Ø¥Ù†Ù‡ Ø¹Ù„Ù‰ ÙŠØ³Ø§Ø±Ùƒ"],
    ["It's on your right","Ø¥Ù†Ù‡ Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ†Ùƒ"],
    ["Turn back","Ø§Ø±Ø¬Ø¹ Ù„Ù„Ø®Ù„Ù"]
  ],

  "Numbers & Time": [
    ["One","ÙˆØ§Ø­Ø¯"],
    ["Two","Ø§Ø«Ù†Ø§Ù†"],
    ["Three","Ø«Ù„Ø§Ø«Ø©"],
    ["Four","Ø£Ø±Ø¨Ø¹Ø©"],
    ["Five","Ø®Ù…Ø³Ø©"],
    ["Six","Ø³ØªØ©"],
    ["Seven","Ø³Ø¨Ø¹Ø©"],
    ["Eight","Ø«Ù…Ø§Ù†ÙŠØ©"],
    ["Nine","ØªØ³Ø¹Ø©"],
    ["Ten","Ø¹Ø´Ø±Ø©"],
    ["Eleven","Ø£Ø­Ø¯ Ø¹Ø´Ø±"],
    ["Twelve","Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±"],
    ["Twenty","Ø¹Ø´Ø±ÙˆÙ†"],
    ["Thirty","Ø«Ù„Ø§Ø«ÙˆÙ†"],
    ["Hundred","Ù…Ø§Ø¦Ø©"],
    ["Today","Ø§Ù„ÙŠÙˆÙ…"],
    ["Tomorrow","ØºØ¯Ø§Ù‹"],
    ["Yesterday","Ø£Ù…Ø³"],
    ["Now","Ø§Ù„Ø¢Ù†"],
    ["Later","Ù„Ø§Ø­Ù‚Ø§Ù‹"],
    ["This morning","Ù‡Ø°Ø§ Ø§Ù„ØµØ¨Ø§Ø­"],
    ["This evening","Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø¡"],
    ["At what time?","ÙÙŠ Ø£ÙŠ ÙˆÙ‚ØªØŸ"],
    ["What time is it?","ÙƒÙ… Ø§Ù„Ø³Ø§Ø¹Ø©ØŸ"],
    ["See you tomorrow","Ø£Ø±Ø§Ùƒ ØºØ¯Ø§Ù‹"]
  ],

  "Health & Wellbeing": [
    ["I need water","Ø£Ø­ØªØ§Ø¬ Ù…Ø§Ø¡"],
    ["I need medicine","Ø£Ø­ØªØ§Ø¬ Ø¯ÙˆØ§Ø¡"],
    ["Where is the pharmacy?","Ø£ÙŠÙ† Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©ØŸ"],
    ["I have a fever","Ù„Ø¯ÙŠ Ø­Ù…Ù‰"],
    ["I have a headache","Ù„Ø¯ÙŠ ØµØ¯Ø§Ø¹"],
    ["Do you have insurance?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒ ØªØ£Ù…ÙŠÙ†ØŸ"],
    ["I need a prescription","Ø£Ø­ØªØ§Ø¬ ÙˆØµÙØ© Ø·Ø¨ÙŠØ©"],
    ["Is there a clinic nearby?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø¹ÙŠØ§Ø¯Ø© Ù‚Ø±ÙŠØ¨Ø©ØŸ"],
    ["Do you have any allergies?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø­Ø³Ø§Ø³ÙŠØ©ØŸ"],
    ["Are you taking any medication?","Ù‡Ù„ ØªØªÙ†Ø§ÙˆÙ„ Ø£ÙŠ Ø£Ø¯ÙˆÙŠØ©ØŸ"],
    ["Do you have chronic conditions?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø§Ù„Ø§Øª Ù…Ø²Ù…Ù†Ø©ØŸ"],
    ["I need a break","Ø£Ø­ØªØ§Ø¬ Ø§Ø³ØªØ±Ø§Ø­Ø©"],
    ["I'm feeling anxious","Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ù‚Ù„Ù‚"],
    ["I need someone to talk to","Ø£Ø­ØªØ§Ø¬ Ø´Ø®ØµØ§Ù‹ Ù„Ø£ØªØ­Ø¯Ø« Ù…Ø¹Ù‡"],
    ["I feel dizzy","Ø£Ø´Ø¹Ø± Ø¨Ø¯ÙˆØ§Ø±"],
    ["I can't breathe","Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ø§Ù„ØªÙ†ÙØ³"],
    ["I have chest pain","Ø£Ø´Ø¹Ø± Ø¨Ø£Ù„Ù… ÙÙŠ Ø§Ù„ØµØ¯Ø±"],
    ["Is there a doctor on duty?","Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø·Ø¨ÙŠØ¨ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ"],
    ["Where can I get tested?","Ø£ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±ØŸ"],
    ["Do you have first aid?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… Ø¥Ø³Ø¹Ø§ÙØ§Øª Ø£ÙˆÙ„ÙŠØ©ØŸ"]
  ],

  "Work & Study": [
    ["I work as...","Ø£Ø¹Ù…Ù„ ÙƒÙ€..."],
    ["I am unemployed","Ø£Ù†Ø§ Ø¹Ø§Ø·Ù„ Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„"],
    ["I have an interview","Ù„Ø¯ÙŠ Ù…Ù‚Ø§Ø¨Ù„Ø© Ø¹Ù…Ù„"],
    ["I need a CV","Ø£Ø­ØªØ§Ø¬ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ©"],
    ["I study at...","Ø£Ø¯Ø±Ø³ ÙÙŠ..."],
    ["I am a student","Ø£Ù†Ø§ Ø·Ø§Ù„Ø¨"],
    ["Can you recommend a school?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ±Ø´ÙŠØ­ Ù…Ø¯Ø±Ø³Ø©ØŸ"],
    ["I need a tutor","Ø£Ø­ØªØ§Ø¬ Ù…Ø¯Ø±Ø³ Ø®ØµÙˆØµÙŠ"],
    ["What is the schedule?","Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø¯ÙˆÙ„ØŸ"],
    ["Is there homework?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ÙˆØ§Ø¬Ø¨ Ù…Ù†Ø²Ù„ÙŠØŸ"],
    ["When is the exam?","Ù…ØªÙ‰ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŸ"],
    ["Can I get extra materials?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØ§Ø¯ Ø¥Ø¶Ø§ÙÙŠØ©ØŸ"],
    ["I need a day off","Ø£Ø­ØªØ§Ø¬ ÙŠÙˆÙ… Ø¹Ø·Ù„Ø©"],
    ["When is the deadline?","Ù…ØªÙ‰ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØŸ"],
    ["I am on vacation","Ø£Ù†Ø§ ÙÙŠ Ø¥Ø¬Ø§Ø²Ø©"],
    ["Can I submit this online?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªÙ‚Ø¯ÙŠÙ… Ù‡Ø°Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŸ"],
    ["Where is the office?","Ø£ÙŠÙ† Ø§Ù„Ù…ÙƒØªØ¨ØŸ"],
    ["Who is my supervisor?","Ù…Ù† Ù‡Ùˆ Ù…Ø´Ø±ÙÙŠØŸ"],
    ["Can I have a reference?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆØµÙŠØ©ØŸ"],
    ["Is there a training session?","Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø¬Ù„Ø³Ø© ØªØ¯Ø±ÙŠØ¨ØŸ"]
  ],

  "Technology & Communication": [
    ["My phone is dead","Ù‡Ø§ØªÙÙŠ Ù†ÙØ¯ Ø´Ø­Ù†Ù‡"],
    ["I need internet","Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª"],
    ["Can you connect me?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØµÙŠÙ„ÙŠØŸ"],
    ["My password doesn't work","ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø§ ØªØ¹Ù…Ù„"],
    ["I forgot my password","Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"],
    ["Reset password","Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"],
    ["Can I call you later?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ Ù„Ø§Ø­Ù‚Ø§Ù‹ØŸ"],
    ["Send me a message","Ø£Ø±Ø³Ù„ Ù„ÙŠ Ø±Ø³Ø§Ù„Ø©"],
    ["What's your email?","Ù…Ø§ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŸ"],
    ["Do you have Wi-Fi?","Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ… ÙˆØ§ÙŠ ÙØ§ÙŠØŸ"],
    ["Can I pay online?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŸ"],
    ["Track my order","ØªØªØ¨Ø¹ Ø·Ù„Ø¨ÙŠ"],
    ["Order status","Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨"],
    ["Add to cart","Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"],
    ["Checkout","Ø§Ù„Ø¯ÙØ¹"],
    ["Is there a charger I can borrow?","Ù‡Ù„ ÙŠÙˆØ¬Ø¯ Ø´Ø§Ø­Ù† ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ø³ØªØ¹Ø§Ø±Ù‡ØŸ"],
    ["Where is the nearest outlet?","Ø£ÙŠÙ† Ø£Ù‚Ø±Ø¨ Ù…Ù†ÙØ° ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ"],
    ["How do I connect to Wi-Fi?","ÙƒÙŠÙ Ø£ØªØµÙ„ Ø¨Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠØŸ"],
    ["Is the app available in English?","Ù‡Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…ØªØ§Ø­ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŸ"],
    ["Can you send the file?","Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„ÙØŸ"]
  ]
};

/* Build groups according to selected density, but DO NOT invent phrases.
   If requested density > available unique phrases, cap to available count.
*/
function buildGroups(density){
  const out = {};
  const availability = {};
  Object.keys(baseGroups).forEach(groupName=>{
    const available = baseGroups[groupName].length;
    availability[groupName] = available;
    const take = Math.min(density, available);
    out[groupName] = baseGroups[groupName].slice(0, take).map(p => ({ english: p[0], arabic: p[1] }));
  });
  return { groups: out, availability };
}

/* Initial state */
let selectedDensity = 25; // default to 25 to show more but not exceed many groups
let built = buildGroups(selectedDensity);
let groups = built.groups;
let availability = built.availability;

/* Render */
const grid = document.getElementById('grid');
const densityNote = document.getElementById('densityNote');

function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

function render(groupsObj){
  grid.innerHTML = '';
  Object.keys(groupsObj).forEach(groupName=>{
    const gdiv = document.createElement('div');
    gdiv.className='group';
    gdiv.innerHTML = `<h2>${escapeHtml(groupName)}</h2>`;
    grid.appendChild(gdiv);
    groupsObj[groupName].forEach(item=>{
      const card = document.createElement('div');
      card.className='card';
      card.setAttribute('data-english', item.english);
      card.setAttribute('data-arabic', item.arabic);
      card.innerHTML = `
        <div class="left">
          <div class="term" title="${escapeHtml(item.english)}">${escapeHtml(item.english)}</div>
          <div class="trans" title="${escapeHtml(item.arabic)}">${escapeHtml(item.arabic)}</div>
        </div>
        <div class="actions">
          <button class="btn speak" title="Listen">
            <span class="icon" aria-hidden="true">ðŸ”Š</span>
          </button>
        </div>
      `;
      grid.appendChild(card);
    });
  });

  // Update density note: inform user if any group was capped
  const cappedGroups = Object.keys(availability).filter(g => availability[g] < selectedDensity);
  if(cappedGroups.length){
    densityNote.textContent = `Note: some groups have fewer than ${selectedDensity} unique expressions. Those groups are capped to their available unique items.`;
  } else {
    densityNote.textContent = '';
  }
}

/* Initial render */
render(groups);

/* Columns control */
document.getElementById('columns').addEventListener('change', e=>{
  const cols = Number(e.target.value) || 12;
  grid.style.gridTemplateColumns = `repeat(${cols},1fr)`;
});

/* Density control */
document.getElementById('density').addEventListener('change', e=>{
  selectedDensity = Number(e.target.value) || 25;
  const builtNow = buildGroups(selectedDensity);
  groups = builtNow.groups;
  availability = builtNow.availability;
  render(groups);
});

/* Search across all groups */
document.getElementById('search').addEventListener('input', e=>{
  const q = e.target.value.trim().toLowerCase();
  if(!q){ render(groups); return; }
  const filtered = {};
  Object.keys(groups).forEach(g=>{
    const matches = groups[g].filter(it=>{
      return (it.english||'').toLowerCase().includes(q) || (it.arabic||'').includes(q);
    });
    if(matches.length) filtered[g] = matches;
  });
  render(filtered);
});

/* Speech Synthesis setup */
const voiceSelect = document.getElementById('voiceSelect');
const langSelect = document.getElementById('lang');
let voices = [];
function loadVoices(){
  voices = (speechSynthesis.getVoices() || []).sort((a,b)=>a.name.localeCompare(b.name));
  voiceSelect.innerHTML = '';
  if(!voices.length){ voiceSelect.innerHTML = '<option>No voices available</option>'; return; }
  voices.forEach(v=>{
    const opt = document.createElement('option');
    opt.value = v.name;
    opt.textContent = `${v.name} â€” ${v.lang}`;
    voiceSelect.appendChild(opt);
  });
}
loadVoices();
if(typeof speechSynthesis !== 'undefined') speechSynthesis.onvoiceschanged = loadVoices;

function speakText(text, lang){
  if(!('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  const selected = voiceSelect.value;
  const v = voices.find(x=>x.name===selected) || voices.find(x=>x.lang && x.lang.startsWith(lang)) || voices[0];
  if(v) u.voice = v;
  u.lang = lang === 'ar' ? 'ar' : 'en-US';
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* Card speak */
grid.addEventListener('click', e=>{
  const btn = e.target.closest('.speak');
  if(!btn) return;
  const card = btn.closest('.card');
  const lang = langSelect.value || 'en';
  const text = lang === 'ar' ? card.dataset.arabic : card.dataset.english;
  speakText(text, lang);
});

/* Play all (rendered cards) */
document.getElementById('playAll').addEventListener('click', async ()=>{
  const lang = langSelect.value || 'en';
  const cards = Array.from(document.querySelectorAll('.card'));
  for(const c of cards){
    const text = lang === 'ar' ? c.dataset.arabic : c.dataset.english;
    speakText(text, lang);
    await waitForEnd();
  }
});
function waitForEnd(){
  return new Promise(resolve=>{
    if(!('speechSynthesis' in window)) return resolve();
    const onEnd = ()=>{ speechSynthesis.removeEventListener('end', onEnd); resolve(); };
    speechSynthesis.addEventListener('end', onEnd);
    setTimeout(()=>{ speechSynthesis.removeEventListener('end', onEnd); resolve(); }, 1200);
  });
}

/* Accessibility: keyboard support for play all (Enter on focused button) */
document.getElementById('playAll').addEventListener('keyup', e=>{
  if(e.key === 'Enter') e.target.click();
});
</script>
</body>
</html>
