<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>100 English Expressions â€” Arabic Translation â€” Audio Grid</title>
<style>
  :root{
    --bg:#f4f7fb; --card:#fff; --accent:#0b6efd; --muted:#6b7280;
    --gap:12px; --radius:10px; --mincol:220px;
  }
  body{font-family:Inter, system-ui, Arial, sans-serif; margin:16px; background:var(--bg); color:#0f172a;}
  header{display:flex; gap:12px; align-items:center; margin-bottom:14px; flex-wrap:wrap;}
  h1{font-size:1.05rem; margin:0;}
  .controls{margin-left:auto; display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  select,input[type="search"],input[type="range"],button{padding:8px 10px; border-radius:8px; border:1px solid #e6edf3; background:#fff;}
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(var(--mincol),1fr)); gap:var(--gap);}
  .card{background:var(--card); border-radius:var(--radius); padding:12px; box-shadow:0 1px 3px rgba(15,23,42,0.06); display:flex; flex-direction:column; gap:8px; align-items:flex-start;}
  .en{font-weight:700; font-size:1rem; color:#07103a;}
  .ar{font-size:0.95rem; color:var(--muted); direction:rtl; width:100%;}
  .row{display:flex; gap:8px; width:100%; align-items:center; justify-content:space-between;}
  .btn-sound{background:transparent; border:none; color:var(--accent); cursor:pointer; font-size:18px;}
  .meta{font-size:0.85rem; color:var(--muted);}
  footer{margin-top:14px; font-size:0.85rem; color:var(--muted);}
  @media (max-width:420px){ :root{--mincol:160px;} }
  .density-small{ --mincol:140px; }
  .density-medium{ --mincol:220px; }
  .density-large{ --mincol:320px; }
</style>
</head>
<body>
<header>
  <div>
    <h1>100 English Expressions â€” Arabic Translation â€” Audio</h1>
    <div class="meta">Click the ðŸ”Š icon to hear the English pronunciation.</div>
  </div>

  <div class="controls">
    <input id="search" type="search" placeholder="Search expression (EN/AR)" />
    <label for="density" class="meta">Density</label>
    <select id="density" aria-label="Grid size">
      <option value="density-small">Compact</option>
      <option value="density-medium" selected>Medium</option>
      <option value="density-large">Large</option>
    </select>
    <label for="voiceSelect" class="meta">Voice</label>
    <select id="voiceSelect" aria-label="Voice selector"></select>
    <label class="meta">Rate</label>
    <input id="rate" type="range" min="0.6" max="1.6" step="0.1" value="1" />
    <button id="stopBtn" title="Stop playback">Stop</button>
  </div>
</header>

<main>
  <div id="grid" class="grid density-medium" aria-live="polite"></div>
</main>

<footer>
  <div class="meta">Tip: choose Compact density for faster loading on slow devices.</div>
</footer>

<script>
/* 100 English expressions with Arabic translations (same as before) */
const expressions = [
{en:"Hi", ar:"Ù…Ø±Ø­Ø¨Ø§"},{en:"Hello", ar:"Ø£Ù‡Ù„Ø§Ù‹"},{en:"Good morning", ar:"ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±"},{en:"Good evening", ar:"Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±"},
{en:"Goodbye", ar:"Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡"},{en:"See you soon", ar:"Ø£Ø±Ø§Ùƒ Ù‚Ø±ÙŠØ¨Ø§"},{en:"Thank you", ar:"Ø´ÙƒØ±Ø§"},{en:"Thanks a lot", ar:"Ø´ÙƒØ±Ø§ Ø¬Ø²ÙŠÙ„Ø§"},
{en:"Youâ€™re welcome", ar:"Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø­Ø¨ ÙˆØ§Ù„Ø³Ø¹Ø©"},{en:"Please", ar:"Ù…Ù† ÙØ¶Ù„Ùƒ"},{en:"Excuse me", ar:"Ø¹ÙÙˆØ§Ù‹"},{en:"Sorry", ar:"Ø¢Ø³Ù"},
{en:"How are you?", ar:"ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ"},{en:"I am fine", ar:"Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±"},{en:"And you?", ar:"ÙˆØ£Ù†ØªØŸ"},{en:"My name is...", ar:"Ø§Ø³Ù…ÙŠ..."},
{en:"Nice to meet you", ar:"ØªØ´Ø±ÙØª Ø¨Ù…Ù‚Ø§Ø¨Ù„ØªÙƒ"},{en:"Where is the bathroom?", ar:"Ø£ÙŠÙ† Ø§Ù„Ø­Ù…Ø§Ù…ØŸ"},{en:"How much is this?", ar:"ÙƒÙ… Ø«Ù…Ù†Ù‡ØŸ"},{en:"I donâ€™t understand", ar:"Ù„Ø§ Ø£ÙÙ‡Ù…"},
{en:"Do you speak Arabic?", ar:"Ù‡Ù„ ØªØªÙƒÙ„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŸ"},{en:"Iâ€™m sorry", ar:"Ø£Ù†Ø§ Ø¢Ø³Ù/Ø¢Ø³ÙØ©"},{en:"Congratulations", ar:"Ù…Ø¨Ø±ÙˆÙƒ"},{en:"Good luck", ar:"Ø­Ø¸Ø§ Ø³Ø¹ÙŠØ¯Ø§"},
{en:"Enjoy your meal", ar:"Ø¨Ø§Ù„Ù‡Ù†Ø§ ÙˆØ§Ù„Ø´ÙØ§"},{en:"I am hungry", ar:"Ø£Ù†Ø§ Ø¬Ø§Ø¦Ø¹"},{en:"I am thirsty", ar:"Ø£Ù†Ø§ Ø¹Ø·Ø´Ø§Ù†"},{en:"Where is the station?", ar:"Ø£ÙŠÙ† Ø§Ù„Ù…Ø­Ø·Ø©ØŸ"},
{en:"Help me", ar:"Ø³Ø§Ø¹Ø¯Ù†ÙŠ"},{en:"Call the police", ar:"Ø§ØªØµÙ„ Ø¨Ø§Ù„Ø´Ø±Ø·Ø©"},{en:"I need a doctor", ar:"Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø·Ø¨ÙŠØ¨"},{en:"I love you", ar:"Ø£Ø­Ø¨Ùƒ"},
{en:"Good night", ar:"ØªØµØ¨Ø­ Ø¹Ù„Ù‰ Ø®ÙŠØ±"},{en:"What time is it?", ar:"ÙƒÙ… Ø§Ù„Ø³Ø§Ø¹Ø©ØŸ"},{en:"Today", ar:"Ø§Ù„ÙŠÙˆÙ…"},{en:"Tomorrow", ar:"ØºØ¯Ø§"},
{en:"Yesterday", ar:"Ø£Ù…Ø³"},{en:"Now", ar:"Ø§Ù„Ø¢Ù†"},{en:"Later", ar:"Ù„Ø§Ø­Ù‚Ø§Ù‹"},{en:"Always", ar:"Ø¯Ø§Ø¦Ù…Ø§Ù‹"},{en:"Never", ar:"Ø£Ø¨Ø¯Ø§Ù‹"},
{en:"Maybe", ar:"Ø±Ø¨Ù…Ø§"},{en:"Of course", ar:"Ø¨Ø§Ù„Ø·Ø¨Ø¹"},{en:"Okay", ar:"Ø­Ø³Ù†Ø§Ù‹"},{en:"I want", ar:"Ø£Ø±ÙŠØ¯"},{en:"I donâ€™t want", ar:"Ù„Ø§ Ø£Ø±ÙŠØ¯"},
{en:"I like", ar:"Ø£Ø­Ø¨"},{en:"I donâ€™t like", ar:"Ù„Ø§ Ø£Ø­Ø¨"},{en:"Where is...?", ar:"Ø£ÙŠÙ†...ØŸ"},{en:"How?", ar:"ÙƒÙŠÙØŸ"},{en:"Why?", ar:"Ù„Ù…Ø§Ø°Ø§ØŸ"},
{en:"Who?", ar:"Ù…Ù†ØŸ"},{en:"What?", ar:"Ù…Ø§Ø°Ø§ØŸ"},{en:"When?", ar:"Ù…ØªÙ‰ØŸ"},{en:"How much?", ar:"ÙƒÙ…ØŸ"},{en:"Left", ar:"Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±"},
{en:"Right", ar:"Ø¥Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†"},{en:"Straight ahead", ar:"Ù…Ø¨Ø§Ø´Ø±Ø©"},{en:"Near", ar:"Ù‚Ø±ÙŠØ¨"},{en:"Far", ar:"Ø¨Ø¹ÙŠØ¯"},{en:"Entrance", ar:"Ù…Ø¯Ø®Ù„"},
{en:"Exit", ar:"Ù…Ø®Ø±Ø¬"},{en:"Open", ar:"Ù…ÙØªÙˆØ­"},{en:"Closed", ar:"Ù…ØºÙ„Ù‚"},{en:"Attention", ar:"Ø§Ù†ØªØ¨Ø§Ù‡"},{en:"Danger", ar:"Ø®Ø·Ø±"},
{en:"No entry", ar:"Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„"},{en:"Welcome", ar:"Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹"},{en:"Have a safe trip", ar:"Ø±Ø­Ù„Ø© Ø³Ø¹ÙŠØ¯Ø©"},{en:"Closed for maintenance", ar:"Ù…ØºÙ„Ù‚ Ù„Ù„ØµÙŠØ§Ù†Ø©"},
{en:"Reservation", ar:"Ø­Ø¬Ø²"},{en:"Ticket", ar:"ØªØ°ÙƒØ±Ø©"},{en:"Map", ar:"Ø®Ø±ÙŠØ·Ø©"},{en:"Airport", ar:"Ø§Ù„Ù…Ø·Ø§Ø±"},{en:"Train station", ar:"Ø§Ù„Ù…Ø­Ø·Ø©"},
{en:"Hotel", ar:"ÙÙ†Ø¯Ù‚"},{en:"Restaurant", ar:"Ù…Ø·Ø¹Ù…"},{en:"Cafe", ar:"Ù…Ù‚Ù‡Ù‰"},{en:"Shop", ar:"Ù…ØªØ¬Ø±"},{en:"Pharmacy", ar:"ØµÙŠØ¯Ù„ÙŠØ©"},
{en:"Hospital", ar:"Ù…Ø³ØªØ´ÙÙ‰"},{en:"School", ar:"Ù…Ø¯Ø±Ø³Ø©"},{en:"University", ar:"Ø¬Ø§Ù…Ø¹Ø©"},{en:"Work", ar:"Ø¹Ù…Ù„"},{en:"Home", ar:"Ù…Ù†Ø²Ù„"},
{en:"Apartment", ar:"Ø´Ù‚Ø©"},{en:"Street", ar:"Ø´Ø§Ø±Ø¹"},{en:"City", ar:"Ù…Ø¯ÙŠÙ†Ø©"},{en:"Country", ar:"Ø¯ÙˆÙ„Ø©"},{en:"Last name", ar:"Ø§Ù„Ù„Ù‚Ø¨"},
{en:"First name", ar:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„"},{en:"Address", ar:"Ø¹Ù†ÙˆØ§Ù†"},{en:"Phone", ar:"Ù‡Ø§ØªÙ"},{en:"Email", ar:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"},{en:"Password", ar:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"},
{en:"Error", ar:"Ø®Ø·Ø£"},{en:"Success", ar:"Ù†Ø¬Ø§Ø­"},{en:"Loading", ar:"Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„"},{en:"Send", ar:"Ø¥Ø±Ø³Ø§Ù„"},{en:"Cancel", ar:"Ø¥Ù„ØºØ§Ø¡"},
{en:"Save", ar:"Ø­ÙØ¸"},{en:"Delete", ar:"Ø­Ø°Ù"},{en:"Edit", ar:"ØªØ¹Ø¯ÙŠÙ„"},{en:"View", ar:"Ø¹Ø±Ø¶"},{en:"Print", ar:"Ø·Ø¨Ø§Ø¹Ø©"},{en:"Download", ar:"ØªØ­Ù…ÙŠÙ„"}
];

/* DOM refs */
const grid = document.getElementById('grid');
const voiceSelect = document.getElementById('voiceSelect');
const searchInput = document.getElementById('search');
const rateInput = document.getElementById('rate');
const densitySelect = document.getElementById('density');
const stopBtn = document.getElementById('stopBtn');

/* Render function */
function render(list){
  grid.innerHTML = '';
  list.forEach((item, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="row">
        <div class="en">${escapeHtml(item.en)}</div>
        <button class="btn-sound" data-index="${idx}" title="Listen" aria-label="Listen ${escapeHtml(item.en)}">ðŸ”Š</button>
      </div>
      <div class="ar">${escapeHtml(item.ar)}</div>
    `;
    grid.appendChild(card);
  });
  grid.querySelectorAll('.btn-sound').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      const i = Number(btn.dataset.index);
      speak(expressions[i].en);
    });
  });
}

/* Speech synthesis helpers - English-only voices */
let voices = [];
function populateVoicesEnglishOnly(){
  const all = speechSynthesis.getVoices() || [];
  // Filter to voices that are English variants
  const englishVoices = all.filter(v => {
    const lang = (v.lang || '').toLowerCase();
    const name = (v.name || '').toLowerCase();
    return lang.startsWith('en') || name.includes('english');
  });
  // Sort by region code for predictable order (en-GB, en-US, en-AU, en-IN, etc.)
  englishVoices.sort((a,b) => (a.lang || '').localeCompare(b.lang || ''));
  voices = englishVoices;
  if(voices.length > 0){
    voiceSelect.innerHTML = voices.map((v,i)=>`<option value="${i}">${v.name} â€” ${v.lang}</option>`).join('');
  } else {
    // Fallback: show a single English option and set default lang to en-US
    voiceSelect.innerHTML = '<option value="-1">English voices not available on this device</option>';
  }
}

function speak(text){
  if(!('speechSynthesis' in window)){ alert('Speech synthesis not available in this browser.'); return; }
  const utter = new SpeechSynthesisUtterance(text);
  const sel = Number(voiceSelect.value);
  if(voices.length > 0 && voices[sel] && sel >= 0){
    utter.voice = voices[sel];
    utter.lang = voices[sel].lang || 'en-US';
  } else {
    // fallback language
    utter.lang = 'en-US';
  }
  utter.rate = Number(rateInput.value) || 1;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

/* Utilities */
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* Search/filter */
searchInput.addEventListener('input', ()=>{
  const q = searchInput.value.trim().toLowerCase();
  if(!q){ render(expressions); return; }
  const filtered = expressions.filter(e => e.en.toLowerCase().includes(q) || e.ar.includes(q));
  render(filtered);
});

/* Density selector */
densitySelect.addEventListener('change', ()=>{
  grid.classList.remove('density-small','density-medium','density-large');
  grid.classList.add(densitySelect.value);
});

/* Stop button */
stopBtn.addEventListener('click', ()=> speechSynthesis.cancel());

/* Init */
render(expressions);

if('speechSynthesis' in window){
  populateVoicesEnglishOnly();
  // Some browsers load voices asynchronously
  speechSynthesis.onvoiceschanged = populateVoicesEnglishOnly;
} else {
  voiceSelect.innerHTML = '<option>Not available</option>';
}
</script>
</body>
</html>
